# How to use Rezzuf+K-Scheduler on fuzzuf

This is the K-Scheduler combned with not AFL but Rezzuf.

K-Scheduler is an algorithm to prioritize seeds in the queue of AFL like fuzzers. K-Scheduler can be combined with most afl like fuzzer, and fuzzuf implements AFL+K-Scheduler and Rezzuf+K-Scheduler. This docment covers ony difference between AFL+K-Scheduler and Rezzuf+K-Scheduer, so please refer [AFL+K-Scheduler](../afl_kscheduler/manual.md) for detail on K-Scheduler itself.

## Usage

```
$ fuzzuf rezzuf_kscheduler [options]
```

Basic usage is almost same as AFL+K-Scheduler

First, generate centrality.
\<PUT\> is the target executable binary. The requirements of the binary is same as AFL+K-Scheduler, thus the binary generated by the process described in AFL+K-Scheduler manual can be used for Rezzuf+K-Scheduler as is.

```
$ cd <ROOT_DIR>
$ gen_graph.py <PUT>
```

Run fuzzer. Notable difference to AFL+K-Scheduler is that there is no -d option due to Rezzuf doesn't have deterministic stage.

```
$ cd <OUTPUT_DIR>
$ fuzzuf rezzuf_kscheduler -i <INITIAL_SEED_DIR> -o <OUTPUT_DIR> -e forkserver --forksrv true -s <PUT> <ARGS_FOR_PUT>
```

Run gen\_dyn\_weight.py on another terminal.
Again, it is important to run both at same directory.

```
$ cd <OUTPUT_DIR>
$ gen_dyn_weight.py
```

## Options

All global options and AFL specific options described in [afl/algorithms](../afl/algorithm_en.md) are available.

In addition following option is available

### --sequential

Assume basic block ids are sequential.
In this mode, coverage bitmap beyond the highest basic block IDs are ignored.
If the PUT has small number of basic blocks, this reduces cost to search or count over coverage bitmap dramatically.

## Implementation

Although Rezzuf+K-Scheduler is theorically an inherited algorithm of Rezzuf, it inherits AFL due to difficulity to inherit current implementation of Rezzuf. Therefore, directories named rezzuf\_kscheduler contails whole copy of Rezzuf and K-Scheduler specific changes.

## Debug feature

Both EnableVerboseDebugLog and EnableKSchedulerSortByEnergy switch are available on Rezzuf+K-Scheduller too.

